; Utilizado para movimientos simples:
; * Terminaciones de golpes en combos simples
; * Fireball
; * Charge
; * Expulsar Ki
; * Beam Simple
; * Toda clase de combos
; * Cualquier cosa de este estilo
; 
; Nros de states usados
; * [250,299] = golpes fuertes / terminaciones de golpes basicos
; * [1110, 1199] = teleport combos
; * [1200, 1299] = ataques fisicos normales
; * [1000,1004] = dash
; * [1005,1011] = fly
; * [770,771] = zanzoken/teleport/velocidad
; * 4999 = volver al escenario si te fuiste de camara
; * 5300 = Tired

;---------------------------------------------------------------------------
;Trample Kick
[Statedef 232]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 70
ctrl = 0
anim = 232
hitcountpersist = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = random < 500
trigger1 = animelem = 2
value = 3,0 + (random%5)
volume = 255
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3
volume = -60

[State 232, 3]
type = HitDef
trigger1 = !Time
attr = C, NA
damage = 40
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = -1
sparkxy = -7, -5
hitsound = s1, 2
guardsound = s2, 0
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2,0
air.velocity = -2,-1
guard.velocity = -5

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 16,-14
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 232, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Bash Kick
[Statedef 242]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 40
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 242

[State 242, Sound]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 242, Voice]
type = PlaySnd
triggerall = random < 500
trigger1 = animelem = 2
value = 3,0 + (random%5)
volume = 255
channel = 0

[State 242, VelSet]
type = Velset
trigger1 = time = [6,8]
x = 3.5
[State 242, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 242, AfterImage]
type = AfterImage
trigger1 = animelem = 2
time = -1
timegap	= 1
framegap = 1
palcolor = 180
length = 25
palbright = 10,10,10
palmul = .55, .55, .55
palcontrast = 110,110,110
trans = add

[State 242, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = 50
guardflag = MA
pausetime = 10,13
sparkno = -1
sparkxy = -27,-60
hitsound   = S1,7
guardsound = s2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6,-5
air.velocity = -6,-5
air.fall = 1
fall = 1
envshake.time = 5
envshake.freq = 140
envshake.ampl = -2
envshake.phase = 90

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(27+const(size.ground.front))), -63
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 242, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Rapid Kicks
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 245
poweradd = -100
sprpriority = 1
hitcountpersist = 1

[State 0, Voice]
type = PlaySnd
triggerall = random <= 500
trigger1 = time = 0
value = 3,17+(random%3)
volume = 500
channel = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
x = 0.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
value = 0,1

[State 0, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
pausetime = 2, 3
sparkno = -1
sparkxy = -15, -40
hitsound = s1, 2
guardsound = s2, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1.5
air.velocity = -1,-1

[State 245, 1]
type = Helper
triggerall = AnimElem = 3
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 40,-40
size.xscale = .8
size.yscale = .8
ignorehitpause = 1

[State 245, 2]
type = Helper
triggerall = AnimElem = 5
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 40,-34
size.xscale = .8
size.yscale = .8
ignorehitpause = 1

[State 245, 3]
type = Helper
triggerall = AnimElem = 7
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 40,-46
size.xscale = .8
size.yscale = .8
ignorehitpause = 1

[State 0, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Spin Kick - A
[Statedef 246]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 60
ctrl = 0
sprpriority = 2
anim = 246

[State 246, Voice]
type = PlaySnd
triggerall = random < 400
trigger1 = animelem = 1
value = 3,25+random%4
volume = 550
channel = 0

[State 246, Sound]
type = PlaySnd
trigger1 = time = 0
value = 0,4

[State 246, Velset]
type = VelSet
trigger1 = !time
x = 0
y = -7.0

[State 246, Velset]
type = VelAdd
trigger1 = time < 15
x = -0.25

[State 246, AfterImage]
type = AfterImage
trigger1 = time = 1
time = 20
length = 10
palinvertall = 0
palcolor = 256
palbright = 10,10,10
palcontrast = 90,30,100
paladd = 25,30,35
palmul = .45,.65,.75
timegap = 1
framegap = 1
trans = Add

[State 246, SpinKick]
type = Explod
trigger1 = time = 5
Anim = 7019
Pos = 3, -35
Id = 7019
sprpriority = 3
removeongethit = 1
Postype = p1
Bindtime = -1
ownpal =1
scale = 1,1

[State 246, S.Kick A]
type = Explod
trigger1 = Time = 5
anim = 256
Id = 256
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick B]
type = Explod
trigger1 = Time = 7
anim = 257
Id = 257
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick C]
type = Explod
trigger1 = Time = 9
anim = 258
Id = 258
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3

[State 246, HitDef]
type = HitDef
triggerall = !movehit
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
trigger5 = animelem = 7
trigger6 = animelem = 8
attr = S, NA
animtype  = Hard
damage    = 35,14
guardflag = MA
pausetime = 3,7
sparkno = -1
sparkxy = 17,-51
hitsound   = S1,4
guardsound = 2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2.6,-5.5
air.velocity = -3.6,-9.5
air.fall = 1
fall.recover = 0

[State 246, HitDef]
type = HitDef
triggerall = hitcount < 3
triggerall = movehit
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
trigger5 = animelem = 7
trigger6 = animelem = 8
attr = S, NA
animtype  = Hard
damage    = 20,14
guardflag = MA
pausetime = 5,10
sparkno = -1
sparkxy = 17,-51
hitsound   = S1,4
guardsound = 2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2.6,-7.5
air.velocity = -2.6,-9.5
air.fall = 1
fall = 1
persistent = 1

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time < 7
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(15+const(size.ground.front))), -45
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time = 7
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(-10+const(size.ground.front))), -75
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 246, CtrlSet]
type = CtrlSet
trigger1 = animelem = 10
value = 1
;---------------------------------------------------------------------------
;Spin Kick - B
[Statedef 247]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 60
ctrl = 0
sprpriority = 2
anim = 246

[State 247, Voice]
type = PlaySnd
triggerall = random < 400
trigger1 = animelem = 1
value = 3,25+random%4
volume = 550
channel = 0

[State 247, Sound]
type = PlaySnd
trigger1 = time = 0
value = 0,4

[State 247, Velset]
type = VelSet
trigger1 = !time
x = 0
y = -7.5

[State 247, Velset]
type = VelAdd
trigger1 = time < 5
x = 0.10

[State 247, Velset]
type = VelAdd
trigger1 = time = [5,15]
x = -0.25

[State 247, AfterImage]
type = AfterImage
trigger1 = time = 1
time = 20
length = 10
palinvertall = 0
palcolor = 256
palbright = 10,10,10
palcontrast = 90,30,100
paladd = 25,30,35
palmul = .45,.65,.75
timegap = 1
framegap = 1
trans = Add

[State 246, SpinKick]
type = Explod
trigger1 = time = 5
Anim = 7019
Pos = 3, -35
Id = 7019
sprpriority = 3
removeongethit = 1
Postype = p1
Bindtime = -1
ownpal =1
scale = 1,1

[State 246, S.Kick A]
type = Explod
trigger1 = Time = 5
anim = 256
Id = 256
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick B]
type = Explod
trigger1 = Time = 7
anim = 257
Id = 257
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick C]
type = Explod
trigger1 = Time = 9
anim = 258
Id = 258
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3

[State 247, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = 35,20
guardflag = MA
pausetime = 3,7
sparkno = -1
sparkxy = 17,-51
hitsound   = S1,4
guardsound = 2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2.6,-7.5
air.velocity = -2.6,-9.0
air.fall = 1
fall.recover = 0

[State 247, HitDef]
type = HitDef
triggerall = hitcount < 3
trigger1 = time = 7
attr = S, NA
animtype  = Hard
damage    = 25,20
guardflag = MA
pausetime = 5,10
sparkno = -1
sparkxy = 17,-51
hitsound   = S1,4
guardsound = 2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2.6,-7.5
air.velocity = -3.6,-9.5
air.fall = 1
fall = 1
persistent = 1

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time < 7
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(15+const(size.ground.front))), -45
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time = 7
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(-10+const(size.ground.front))), -75
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 247, CtrlSet]
type = CtrlSet
trigger1 = animelem = 10
value = 1

;---------------------------------------------------------------------------
;Double Spin Kick
[Statedef 248]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 60
ctrl = 0
sprpriority = 2
anim = 248

[State 248, Voice];Hard
type = PlaySnd
triggerall = random < 400
trigger1 = animelem = 10
value = 3,25+random%4
volume = 550
channel = 0

[State 248, Sound]
type = PlaySnd
trigger1 = time = 0
value = 0,4
[State 248, Sound]
type = PlaySnd
trigger1 = time = 21
value = 0,4

[State 248, Velset]
type = VelSet
trigger1 = !time
x = 0
y = -5

[State 248, Velset]
type = VelSet
trigger1 = time = 23
x = 0
y = -7.5

[State 248, Velset]
type = VelAdd
trigger1 = time = [2,10]
x = 0.15

[State 248, Velset]
type = VelAdd
trigger1 = time = [17,25]
x = 0.55

[State 248, AfterImage]
type = AfterImage
trigger1 = time = 1
time = 30
length = 10
palinvertall = 0
palcolor = 256
palbright = 10,10,10
palcontrast = 90,30,100
paladd = 25,30,35
palmul = .45,.65,.75
timegap = 1
framegap = 1
trans = Add

[State 248, SpinKick]
type = Explod
trigger1 = time = 5
Anim = 7019
Pos = 3, -35
Id = 7019
sprpriority = 3
removeongethit = 1
Postype = p1
Bindtime = -1
ownpal =1
scale = 1,1

[State 246, S.Kick A]
type = Explod
trigger1 = Time = 5
anim = 256
Id = 256
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick B]
type = Explod
trigger1 = Time = 7
anim = 257
Id = 257
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick C]
type = Explod
trigger1 = Time = 9
anim = 258
Id = 258
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3

[State 248, SpinKick]
type = Explod
trigger1 = time = 24
Anim = 7019
Pos = 3, -35
Id = 7019
sprpriority = 3
removeongethit = 1
Postype = p1
Bindtime = -1
ownpal =1
scale = 1,1

[State 246, S.Kick A]
type = Explod
trigger1 = Time = 24
anim = 256
Id = 256
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick B]
type = Explod
trigger1 = Time = 24
anim = 257
Id = 257
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
[State 246, S.Kick C]
type = Explod
trigger1 = Time = 24
anim = 258
Id = 258
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3

[State 248, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = 45,20
guardflag = MA
pausetime = 3,7
sparkno = -1
sparkxy = 17,-51
hitsound   = S1,4
guardsound = 2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2.6,-7.5
air.velocity = -2.6,-9.0
air.fall = 1
fall.recover = 0

[State 248, HitDef]
type = HitDef
triggerall = time > 19
triggerall = hitcount < 6
trigger1 = timemod = 4,2
attr = S, NA
animtype  = Hard
damage    = 20,20
guardflag = MA
pausetime = 4,5
sparkno = -1
sparkxy = 17,-51
hitsound   = S1,4
guardsound = 2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1.5,-7.5
air.velocity = -2.5,-9.5
air.fall = 1
fall = 1
persistent = 1

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time < 19
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(15+const(size.ground.front))), -45
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time > 19
trigger1 = timemod = 4,2
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(const(size.ground.front))), -75
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 0]
type = Helper
triggerall = MoveHit
trigger1 = time > 25
trigger1 = timemod = 3,2
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = floor(p2bodydist X +(-30+const(size.ground.front))), -90
size.xscale = .9
size.yscale = .9
ignorehitpause = 1
persistent = 0

[State 248, CtrlSet]
type = CtrlSet
trigger1 = animelem = 21
value = 1
;---------------------------------------------------------------------------
;Zanzoken Combo
[Statedef 252]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 252
sprpriority = -1
hitcountpersist = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,0 + (random%5)
volume = 255
channel = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 50
y = 10+(ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0))

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = Time = 1

[State 0, VarAdd]
type = Varset
trigger1 = Time = 1
v = 16
value = 0
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = s0, 2

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
damage    = 10
guardflag = MA
pausetime = 12,12
sparkno = -1
sparkxy = -10,-70
hitsound   = s1,5
guardsound = s2, 0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10,-4
air.velocity = -10,-4
envshake.time = 15
envshake.freq = 80
envshake.ampl = ifelse(Random <500,-5,5)

[State 0]
type = Helper
triggerall = P2stateno = [5000,5999]
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
ownpal = 1
sprpriority = 5
postype = p1
pos = 30,-40
ignorehitpause = 1
persistent = 0
size.xscale = 1
size.yscale = 1
supermove = 1
supermovetime = 16
pausemovetime = 16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
statetype = A
movetype = I
physics = A
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = pos y < 0 && AnimTime = 0
value = 1
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = ifelse((backedgebodydist < 2),4999,0)
ctrl = ifelse((backedgebodydist < 2),0,1)

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = AnimTime = 0
trigger1 = backedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
; Fly Combo
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
poweradd = -100
anim = 255
hitcountpersist = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = !time && p2dist x < -10

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255
channel = 0

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 8
y = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 30,10
guardflag = HA
priority = 4
pausetime = 8,8
sparkno = -1
sparkxy = -15, -30
hitsound   = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.velocity = -3,-1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 26,-23;23,-45
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(3) >= 0
trigger2 = movecontact
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = pos y = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;---------------------------------------------------------------------------
;Brat UpperCut Begin
[Statedef 260]
type    = U
movetype= A
physics = C
ctrl = 0
velset = 0,0
sprpriority = 1
anim = 260
hitcountpersist = 1

[State 260, ChangeAnim]
type = ChangeAnim
trigger1 = time= 0 && prevstateno = 11
value = 263

[State 260, VarSet Lv 1]
type = VarSet
triggerall = (command != "hold_x" && command != "hold_y")||(command = "hold_x" && command = "hold_y")
trigger1 = time <= 9
v = 27
value = 0
persistent = 1

[State 260, VarSet Lv 2]
type = VarSet
triggerall = command = "hold_x" && command = "hold_y"
trigger1 = time = [10,75]
v = 27
value = 1
persistent = 1

[State 260, VarSet Lv 3]
type = VarSet
triggerall = command = "hold_x" && command = "hold_y"
trigger1 = time >= 76
v = 27
value = 2
persistent = 1

[State 260, Voice Hold];hard
type = PlaySnd
triggerall = random <= 600
trigger1 = time = 30
value = s3,15+(random%2)
volume = 255
channel = 0

[State 260, Start Sound]
type = PlaySnd
triggerall = time = 75
trigger1 = command = "hold_x" && command = "hold_y"
value = 2100, 1
volume = -90

[state 260, ColorFX]
type = PalFX
trigger1 = time > 75 && TimeMod = 9,0
time = 2
add = 64,64,64

[State 260, Extra Velcet];For Maiden Elbow, and some Attacks.
type = Veladd
triggerall = prevstateno = [282,285]
trigger1 = !time
x = 3.5
[State 260, PlayerPush]
type = PlayerPush
triggerall = prevstateno = [282,285]
trigger1 = 1
value = 0

[State 260, Uppercut]
type = ChangeState
triggerall = time > 2
trigger1 = (command != "hold_x" && command != "hold_y")
trigger2 = time > 130
value = 261
ctrl = 1

[State 260, Counter]
type = HitOverride
trigger1 = time > 75
time = 1
attr = SCA, NA, NP, SA, SP
slot = 0
stateno = 262
;---------------------------------------------------------------------------
;Brat UpperCut - Launcher
[Statedef 261]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
sprpriority = 1
anim = 261
hitcountpersist = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = P2stateno != [120,155]
trigger1 = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(27) = 2
v = 27
value = 1

[State 0, NotHitBy]
type = NotHitBy
Trigger1 = prevstateno = 260 = var(27) = 2
value = SCA
time = 1

[State 260, Voice];Low
type = PlaySnd
triggerall = random < 500
trigger1 = animelem = 1
value = 3,25+random%4
volume = 550
channel = 0

[State 0, far Away to P2]
type = VelSet
triggerall = p2bodydist x > 31
trigger1 = !time
x = 1.5

[State 0, Close to P2]
type = VelSet
triggerall = p2bodydist x <= 30
trigger1 >= !time
x = 4.5

[State 261, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 35
timegap	= 1
framegap = 1
palcolor = 180
length = 15
palbright = 10,10,10
palmul = .55, .55, .55
palcontrast = 110,110,110
trans = add

[State 261, Move Sound]
type = PlaySnd
trigger1 = time = 0
value = 0, 1

[State 261, PunchFX]
type = Explod
triggerall = var(27)= 1
trigger1 = animelem = 2
Anim = 7018
Pos = 0, -73
Id = 7018
facing = -1
sprpriority = 4
removeongethit = 0
bindtime = -1
removetime = -2
Postype = p1
SuperMove = 1
ownpal = 1
scale = 0.55,0.55

[State 261, Dust]
type = Explod
trigger1 = time = 6
Anim = 7001
Pos = 0, 2
Id = 7001
sprpriority = -1
removeongethit = 0
removetime = -2
Postype = p1
SuperMove = 1
ownpal = 1
scale = 0.35,0.35
velocity = -1,0

[State 261, HitDef Low]
type = HitDef
triggerall = var(27)= 0
trigger1 = !time
attr = C, NA
damage    = 48
priority  = 3
animtype  = Hard
hitflag = MAF
guardflag = L
pausetime = 15,17
sparkno = -1
sparkxy = -4,-50
hitsound   = S1,4
guardsound = s2,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 16
ground.velocity = -1.2,-11
air.velocity = -6.5,-4
fall = 1
fall.recover = 0
envshake.time = 5
envshake.freq = 140
envshake.ampl = -2
envshake.phase = 90

[State 261, HitDef Medium]
type = HitDef
triggerall = var(27)= [1,2]
trigger1 = !Time
attr = S, NA
damage    = 56
priority  = 3
animtype  = Hard
hitflag = MAF
guardflag = MA
pausetime = 15,17
sparkno = -1
sparkxy = -4,-50
hitsound   = S1,4
guardsound = s2,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 16
ground.velocity = -1.2,-13.75
air.velocity = -7.0,-4.5
fall = 1
fall.recover = 0
envshake.time = 5
envshake.freq = 140
envshake.ampl = -2
envshake.phase = 90

[State 0, Sparks]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 5
pos = 5, -65
size.xscale = 0.85
size.yscale = 0.85
ignorehitpause = 1
persistent = 0
postype = p1    ;p2,front,back,left,right
supermovetime = 999
pausemovetime = 999
ownpal = 1

[State 261, End]
type = ChangeState
triggerall = anim = 261
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Brat UpperCut - Counter
[Statedef 262]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
facep2 = 1
sprpriority = 1
anim = 262
hitcountpersist = 1

[State 262, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 35
timegap	= 1
framegap = 1
palcolor = 180
length = 15
palbright = 10,10,10
palmul = .55, .55, .55
palcontrast = 110,110,110
trans = add

[State 261, Move Sound]
type = PlaySnd
trigger1 = time = 0
value = 0, 4

[State 261, Lazzy Sound]
type = PlaySnd
trigger1 = time = 20
value = 2100, 2
volume = -90

[State 261, PunchFX]
type = Explod
trigger1 = animelem = 2
Anim = 7018
Pos = 0, -73
Id = 7018
facing = -1
sprpriority = 4
removeongethit = 0
bindtime = -1
removetime = -2
Postype = p1
SuperMove = 1
ownpal = 1
scale = 0.55,0.55

[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal ;player
name = "Kanji"
ID = 19000
stateno = 19000
pos = -2 +(random%10),-77 +(random%10)
postype = p1    ;p2,front,back,left,right
sprpriority = 20
supermovetime = 999
pausemovetime = 999
size.xscale = .5
size.yscale = .5
ownpal = 1

[State 262, HitDef Max]
type = hitdef
triggerall = var(27)= 2
trigger1 = !Time
ID = 262
attr = C, SA
damage = 100, 12
animtype = Up
guardflag = M
hitflag = MAF
priority = 5, Miss
pausetime = 4, 4
sparkno = -1
sparkxy = -4, -50
hitsound = s1, 4
guardsound = s2, 0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -.5, -18
air.type = Low
air.velocity = -.5, -18
getpower = 0
givepower = 36, 36
envshake.time = 16
envshake.ampl = 4
ground.cornerpush.veloff = 0
guard.velocity = -10.52
guard.cornerpush.veloff = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
yaccel = 0.5
forcestand = 1

[State 0, p2state]
type = targetstate
triggerall = var(27)= 2
trigger1 = movehit && numtarget(262)
trigger1 = (target(262), stateno = 5000) || (target(262), stateno = 5010) || (target(262), stateno = 5020)
value = 4100
ID = 262
ignorehitpause = 1

[State 0, Sparks]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = -2, -77
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 262, Reset]
type = VarSet
trigger1 = var(27)= 2 && MoveHit
trigger2 = AnimTime = 0
v = 27
value = 0
persistent = 1

[State 262, End]
type = ChangeState
triggerall = anim = 262
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Sonic Elbow X
[StateDef 280];(Light)
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 280
sprpriority = 1
poweradd = -20

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 4
x = 20
y = 0

[State 0, Explod]
type = Explod
trigger1 = Animelem = 4
anim = 15010
ID = 15010
pos =0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove=999
pausemove=999
scale = 0.5,0.5
sprpriority = 3
removeongethit = -1

[State 0, Explod]
type = Explod
trigger1 = Animelem = 5
anim = 7016
ID = 7016
pos = 29, -36;20,-37
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermove=999
pausemove=999
scale = 0.5,0.5
sprpriority = 4
removeongethit = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 8
id =  15010

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 4
value = 100,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 4
value = 4,2
volume = -90

[State 280, 1]
type = HitDef
trigger1 = !time
attr = S, NA
damage = 30,5
animtype =  Hard
guardflag = MA
hitflag = MAF
pausetime = 20, 20
sparkno = -1
sparkxy = -15, -38
hitsound = S1,5
guardsound = S2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5,-3
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.5,-3
air.hittime = 12
envshake.time = 10
envshake.ampl = 5
fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 30,-37
size.xscale = 1.2
size.yscale = 1.2
ignorehitpause = 1
persistent = 0

[State 280, end]
type = ChangeState
triggerall = moveguarded
trigger1 = Animtime = 0
value = 0
ctrl = 1

[State 280, end]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Sonic Elbow Y
[StateDef 281];(Hard)
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 280
sprpriority = 1
poweradd = -40

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 4
x = 27
y = 0

[State 0, Explod]
type = Explod
trigger1 = Animelem = 4
anim = 15010
ID = 15010
pos =0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove=999
pausemove=999
scale = 0.5,0.5
sprpriority = 3
removeongethit = -1

[State 0, Explod]
type = Explod
trigger1 = Animelem = 5
anim = 7016
ID = 7016
pos = 29, -36;20,-37
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermove=999
pausemove=999
scale = 0.5,0.5
sprpriority = 4
removeongethit = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 8
id =  15010

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 4
value = 100,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 4
value = 4,2
volume = -90

[State 281, 1]
type = HitDef
trigger1 = !time
attr = S, NA
damage = 50,5
animtype =  Hard
guardflag = MA
hitflag = MAF
pausetime = 25, 25
sparkno = -1
sparkxy = -15, -38
hitsound = S1,5
guardsound = S2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5,-3
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.5,-3
air.hittime = 12
envshake.time = 15
envshake.ampl = 15
fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 30,-37
size.xscale = 1.5
size.yscale = 1.5
ignorehitpause = 1
persistent = 0

[State 281, end]
type = ChangeState
triggerall = moveguarded
trigger1 = Animtime = 0
value = 0
ctrl = 1

[State 281, end]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Maiden Elbow X
[Statedef 282]
type    = U
movetype= A
physics = C
velset = 0,0
ctrl = 0
sprpriority = 1
anim = 282
hitcountpersist = 1

[State 282, VarSet Lv 1]
type = VarSet
triggerall = (command != "hold_x")||(command = "hold_x")
trigger1 = time <= 9
v = 27
value = 0
persistent = 1

[State 282, VarSet Lv 2]
type = VarSet
triggerall = command = "hold_x"
trigger1 = time = [10,45]
v = 27
value = 1
persistent = 1

[State 282, VarSet Lv 3]
type = VarSet
triggerall = command = "hold_x"
trigger1 = time >= 46
v = 27
value = 2
persistent = 1

[State 282, Voice Hold];hard
type = PlaySnd
triggerall = random <= 500
trigger1 = time = 30
value = s3,15+(random%2)
volume = 255
channel = 0

[State 282, Start Sound]
type = PlaySnd
trigger1 = time = 45
trigger1 = command = "hold_x"
value = 2100, 1
volume = -90

[state 282, ColorFX]
type = PalFX
trigger1 = time > 45 && TimeMod = 9,0
time = 2
add = 64,64,64

[State 282, ChangeStatel]
type = ChangeState
trigger1 = command != "hold_x" && time >= 7
trigger2 = time > 70
value = 283
ctrl = 1

;---------------------------------------------------------------------------
;Maiden Elbow End
[StateDef 283]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 283
sprpriority = 1
poweradd = -20

[State 0, Velset]
type = Velset
triggerall = !MoveHit
trigger1 = animelem = 1
x = 15+(var(27)*3)

[State 0, VelAdd]
type = VelAdd
triggerall = !MoveHit
trigger1 = time > 5
x = 0.1+(var(27)*0.05)

[State 0, VelAdd]
type = VelAdd
triggerall = P2bodydist x <= 0
trigger1 = time > 5
x = -0.02

[State 0, Explod]
type = Explod
trigger1 = Animelem = 1
anim = 15010
ID = 15010
pos =10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove=999
pausemove=999
scale = 0.35,0.35
sprpriority = 3
velocity = -1,0
removeongethit = -1

[State 0, Explod]
type = Explod
trigger1 = Animelem = 2
anim = 7016
ID = 7016
pos = 29, -36;20,-37
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermove=999
pausemove=999
scale = 0.5,0.5
sprpriority = 4
removeongethit = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 8
id =  15010

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 2
value = 100,1
volume = -50

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 2
value = 2100,0
volume = -90

[State 0, HitDef]
type = HitDef
triggerall = var(27) != 2
trigger1 = !time
attr = S, NA
damage = 30+(var(27)*10),5+(var(27)*15)
animtype =  Hard
guardflag = MA
hitflag = MAF
pausetime = 14+(var(27)*3), 16+(var(27)*3)
sparkno = -1
sparkxy = -15, -39
hitsound = S1,3
guardsound = S2,0
ground.type = Low
air.type = Low
ground.slidetime = 12
guard.slidetime = 12
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
ground.velocity = -5-(var(27)*1),0
air.velocity = -4-(var(27)*2),-3
envshake.time = 5 +(var(27)*2)
envshake.freq = 120 +(var(27)*10)
envshake.ampl = 1 +var(27)
air.fall = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = var(27) = 2
trigger1 = MoveHit
value = 0

[State 0, 1]
type = HitDef
triggerall = var(27) = 2
trigger1 = !time
attr = S, NA
damage = 50,15
animtype =  Hard
guardflag = MA
hitflag = MAF
pausetime = 21, 23
sparkno = -1
sparkxy = -15, -39
hitsound = S1,5
guardsound = S2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6.5,-3.5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.5,-3
air.hittime = 12
envshake.time = 10
envshake.ampl = 5
fall = 1

[State 0, NotHitBy]
type = NotHitBy
Trigger1 = var(27) = 2
value = SCA, NA, NP, SA, SP
time = 1

[State 0, Helper]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 30,-37
size.xscale = 0.8
size.yscale = 0.8
ignorehitpause = 1
persistent = 0

[State 283, Reset]
type = VarSet

trigger1 = Animtime = 0
v = 27
value = 0
persistent = 1

[State 283, end]
type = ChangeState
triggerall = moveguarded
trigger1 = Animtime = 0
value = 0
ctrl = 1

[State 283, end]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Maiden Elbow Y
[Statedef 284]
type    = U
movetype= A
physics = C
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 282
hitcountpersist = 1

[State 284, VarSet Lv 1]
type = VarSet
triggerall = (command != "hold_y")||(command = "hold_y")
trigger1 = time <= 9
v = 27
value = 0
persistent = 1

[State 284, VarSet Lv 2]
type = VarSet
triggerall = command = "hold_y"
trigger1 = time = [10,75]
v = 27
value = 1
persistent = 1

[State 284, VarSet Lv 3]
type = VarSet
triggerall = command = "hold_y"
trigger1 = time >= 76
v = 27
value = 2
persistent = 1

[State 284, Voice Hold];hard
type = PlaySnd
triggerall = random <= 500
trigger1 = time = 30
value = s3,15+(random%2)
volume = 255
channel = 0

[State 284, Start Sound]
type = PlaySnd
trigger1 = time = 75
trigger1 = command = "hold_y"
value = 2100, 1
volume = -90

[state 284, ColorFX]
type = PalFX
trigger1 = time > 75 && TimeMod = 9,0
time = 2
add = 64,64,64

[State 284, ChangeStatel]
type = ChangeState
trigger1 = command != "hold_y" && time >= 7
trigger2 = time > 90
value = 285
ctrl = 1

;---------------------------------------------------------------------------
;Maiden Elbow End
[StateDef 285]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 283
sprpriority = 1
poweradd = -50

[State 0, Velset]
type = Velset
triggerall = !MoveHit
trigger1 = animelem = 1
x = 17+(var(27)*3)

[State 0, VelAdd]
type = VelAdd
triggerall = !MoveHit
trigger1 = time > 5
x = 0.1+(var(27)*0.05)

[State 0, VelAdd]
type = VelAdd
triggerall = P2bodydist x <= 0
trigger1 = time > 5
x = -0.02

[State 0, Explod]
type = Explod
trigger1 = Animelem = 1
anim = 15010
ID = 15010
pos =10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove=999
pausemove=999
scale = 0.35,0.35
sprpriority = 3
velocity = -1,0
removeongethit = -1

[State 0, Explod]
type = Explod
trigger1 = Animelem = 2
anim = 7016
ID = 7016
pos = 29, -36;20,-37
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermove=999
pausemove=999
scale = 0.5,0.5
sprpriority = 4
removeongethit = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 8
id =  15010

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 2
value = 100,1
volume = -50

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  animelem = 2
value = 2100,0
volume = -90

[State 0, HitDef]
type = HitDef
triggerall = var(27) != 2
trigger1 = !time
attr = S, NA
damage = 40+(var(27)*12),15+(var(27)*15)
animtype =  Hard
guardflag = MA
hitflag = MAF
pausetime = 14+(var(27)*4), 16+(var(27)*4)
sparkno = -1
sparkxy = -15, -39
hitsound = S1,3
guardsound = S2,0
ground.type = Low
air.type = Low
ground.slidetime = 12
guard.slidetime = 12
ground.hittime = 12
guard.hittime = 12
air.hittime = 12
ground.velocity = -5-(var(27)*2),0
air.velocity = -4-(var(27)*3),-4
envshake.time = 5 +(var(27)*3)
envshake.freq = 120 +(var(27)*10)
envshake.ampl = 1 +(var(27)*2)
air.fall = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = var(27) = 2
trigger1 = MoveHit
value = 0

[State 0, 1]
type = HitDef
triggerall = var(27) = 2
trigger1 = !time
attr = S, NA
damage = 60,25
animtype =  Hard
guardflag = MA
hitflag = MAF
pausetime = 21, 23
sparkno = -1
sparkxy = -15, -39
hitsound = S1,5
guardsound = S2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6.5,-3.5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.5,-3
air.hittime = 12
envshake.time = 10
envshake.ampl = 5
fall = 1

[State 0, NotHitBy]
type = NotHitBy
Trigger1 = var(27) = 2
value = SCA, NA, NP, SA, SP
time = 1

[State 0, Helper]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 30,-37
size.xscale = 0.8
size.yscale = 0.8
ignorehitpause = 1
persistent = 0

[State 285, Reset]
type = VarSet
trigger1 = Animtime = 0
v = 27
value = 0
persistent = 1

[State 285, end]
type = ChangeState
triggerall = moveguarded
trigger1 = Animtime = 0
value = 0
ctrl = 1

[State 285, end]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Body Slam - Short
[Statedef 290]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
poweradd = 20
anim = 290
hitcountpersist = 1
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
time = 8
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = time > 8
attr = SCA, AA, AP, AT
stateno = 50

[State 0, VelSet]
type = VelSet
trigger1 = time >= 0
x = const(velocity.run.fwd.x)

[State 0, Veladd]
type = veladd
trigger1 = Time = 0
x = 2.5
y = -3.5

[State 0, VelAdd]
type = VelAdd
trigger1 = Time <= 15
y = -time*(0.01)

[State 0, VelAdd]
type = VelAdd
trigger1 = Time <= 15
x = -time*(0.02)

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = p2bodydist x < 10
value = 290
elem = 2
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, Voice]
type = PlaySnd
triggerall = random <= 320
trigger1 = time = 1
value = 3, 2+random%3
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,1
volume = -60

[State 57, AfterImage]
type = AfterImage
trigger1 = time = 2
time = 12
timegap	= 1
palcolor = 180
framegap = 1
length = 15
palbright = 10,10,10
palmul = .50, .50, .50
palcontrast = 110,110,110
trans = add

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 40,5
guardflag = HA
priority = 4
pausetime = 9,13
sparkno = -1
sparkxy = -10, -40
hitsound = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4.5,-4.8
air.fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 23,-42
size.xscale = 0.8
size.yscale = 0.8
ignorehitpause = 1
persistent = 0
bindtime = 15

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(2) >= 0
trigger1 = movehit
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = AnimTime = 0 && pos y >= 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = animtime = 0 && Pos Y < 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 1


;---------------------------------------------------------------------------
; Body Slam - Long
[Statedef 291]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
poweradd = 20
anim = 290
hitcountpersist = 1
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
time = 8
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = time > 8
attr = SCA, AA, AP, AT
stateno = 50

[State 0, VelSet]
type = VelSet
trigger1 = time >= 0
x = const(velocity.run.fwd.x)

[State 0, Veladd]
type = veladd
trigger1 = Time = 0
x = 4.9
y = -4.9

[State 0, VelAdd]
type = VelAdd
trigger1 = Time <= 20
y = time*(0.01)

[State 0, VelAdd]
type = VelAdd
trigger1 = Time <= 15
x = -time*(0.01)

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = p2bodydist x < 10
value = 290
elem = 2
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, Voice]
type = PlaySnd
triggerall = random <= 320
trigger1 = time = 1
value = 3, 2+random%3
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,1
volume = -60

[State 57, AfterImage]
type = AfterImage
trigger1 = time = 2
time = 12
timegap	= 1
palcolor = 180
framegap = 1
length = 15
palbright = 10,10,10
palmul = .50, .50, .50
palcontrast = 110,110,110
trans = add

[State 290, 3]
type = HitDef
trigger1 = !Time
attr = A, NA
damage = 35,15
guardflag = HA
priority = 4
pausetime = 9,13
sparkno = -1
sparkxy = -10, -40
hitsound = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 7
ground.hittime  = 10
ground.velocity = -7.5
air.velocity = -5.5,-4.8
air.fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 23,-42
size.xscale = 0.8
size.yscale = 0.8
ignorehitpause = 1
persistent = 0
bindtime = 15

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(2) >= 0
trigger1 = movehit
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = AnimTime = 0 && pos y >= 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = animtime = 0 && Pos Y < 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 1
;------------------------------------------------------------------------
;Brat Sliding Kick - Short
[Statedef 450]
type = C
movetype = A
physics = C
juggle = 2
poweradd = 25
ctrl = 0
sprpriority = 2
anim = 450

[State 0, VelSet] 
type = VelSet
trigger1 = time = 0
x = const(velocity.run.fwd.x)

[State 450, Veladd]
type = Veladd
trigger1 = !time
x = 3.5

[State 450, VelMul]
type = VelMul
triggerall = vel x > 1
trigger1 = Time > 0
x = 1.15

[State 450, Veladd]
type = Veladd
triggerall = vel x > 1
trigger1 = animelem = 4
x = -0.4

[State 450, AfterImage]
type = AfterImage
trigger1 = animelem = 2
time = 35
timegap	= 2
framegap = 1
palcolor = 180
length = 15
palbright = 10,10,10
palmul = .45, .35, .25
palcontrast = 110,110,110
trans = add

[State 450, PlaySND]
type = PlaySnd
trigger1 = Time = 1
value = 0, 6

[State 450, Voice]
type = PlaySnd
triggerall = random <= 220
trigger1 = Time = 1
value = 3, 5+random%3
channel = 0

[State 450, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 35
animtype  = Light
hitflag = MAFD
guardflag = LA
pausetime = 12,12
sparkno = -1
sparkxy = -10,0
hitsound = s1, 4
guardsound = s2, 0
ground.type = Trip
ground.slidetime = 18
ground.hittime  = 12
ground.velocity = 1.8, -7.6
air.velocity = 1.8,-7.2
down.velocity = .9,0
down.hittime = 20

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 45,-2
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 450, MakeDust]
type = Explod
trigger1 = (animelem = 1, >=0 && animelem = 4, < 0) && time%2
Anim = 15310
Pos = -7, -1
Id = 15310
sprpriority = 3
removeongethit = 0
Postype = p1
SuperMove = 1
ownpal = 1
scale = 0.5,0.5

[State 450, PlayerPush]
type = PlayerPush
triggerall = prevstateno = 100
triggerall = MoveHit
trigger1 = 1
value = 0

[State 450, End]
type = ChangeState
triggerall = prevstateno = 11
trigger1 = animelemtime(5) = 4
value = 11
ctrl = 1

[State 450, End]
type = ChangeState
triggerall = prevstateno = 100
trigger1 = AnimTime = 0 ;|| animelem = 6
value = 0
ctrl = 1

;------------------------------------------------------------------------
;Brat Sliding Kick - Long
[Statedef 451]
type = C
movetype = A
physics = C
juggle = 2
poweradd = 25
ctrl = 0
sprpriority = 2
anim = 450

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = const(velocity.run.fwd.x)

[State 450, VelMul]
type = VelMul
trigger1 = Time < 30
x = 1.15

[State 450, Veladd]
type = Veladd
trigger1 = time > 30
x = -0.4

[State 450, AfterImage]
type = AfterImage
trigger1 = animelem = 2
time = 35
timegap	= 2
framegap = 1
palcolor = 180
length = 15
palbright = 10,10,10
palmul = .45, .35, .25
palcontrast = 110,110,110
trans = add

[State 450, PlaySND]
type = PlaySnd
trigger1 = Time = 1
value = 0, 6

[State 450, Voice]
type = PlaySnd
triggerall = random <= 220
trigger1 = Time = 1
value = 3, 5+random%3
channel = 0

[State 450, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 30
animtype  = back
air.animtype = Back
fall.animtype = Back
hitflag = MAFD
guardflag = LA
pausetime = 12,12
sparkno = -1
sparkxy = -10,0
hitsound = s1, 4
guardsound = s2, 0
ground.type = Trip
air.type = Trip
ground.slidetime = 20
guard.slidetime = 20
ground.hittime = 20
guard.hittime = 20
air.hittime = 20
ground.velocity = -1,-5
air.velocity = -1,-5
fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 45,-2
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 450, MakeDust]
type = Explod
trigger1 = (animelem = 1, >=0 && animelem = 4, < 0) && time%2
Anim = 15310
Pos = -7, -1
Id = 15310
sprpriority = 3
removeongethit = 0
Postype = p1
SuperMove = 1
ownpal = 1
scale = 0.5,0.5

[State 450, End]
type = ChangeState
triggerall = prevstateno = 11
trigger1 = animelemtime(5) = 4
value = 11
ctrl = 1

[State 450, End]
type = ChangeState
triggerall = prevstateno = 100
trigger1 = AnimTime = 0 ;|| animelem = 6
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Angel Bird Hold
[Statedef 645]
type = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 1
anim = 645
hitcountpersist = 1

;[State 220, Hold]
;type = VarSet
;triggerall = (command != "hold_a" && command != "hold_b")||(command = "hold_a" && command = "hold_b")
;trigger1 = time <= 9
;v = 27
;value = 0
;persistent = 1

;[State 220, Now]
;type = VarSet
;triggerall = command = "hold_a" && command = "hold_b"
;trigger1 = time = 10
;v = 27
;value = 1
;persistent = 1

[State 220, Next]
type = ChangeState
triggerall = time > 2
trigger1 = (command != "hold_a" && command != "hold_b")
trigger2 = time = 10
value = 646
ctrl = 0
;-----------------------------------------------------------------------------------------
;Angel Bird Start
[StateDef 646]
type = A
movetype= A
physics = A
velset = 0,0
ctrl = 0
anim = 646
poweradd = 50
sprpriority = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 4
time = 20
length = 10
palinvertall = 0
palcolor = 256
palbright = 10,10,10
palcontrast = 90,30,100
paladd = 25,30,35
palmul = .45,.65,.75
timegap = 1
framegap = 1
trans = Add

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
value = S0,1
persistent = 0

[State 0, VelAdd]
type = Velset
trigger1 = !time
x = ceil(3.94*2.8)
y = floor(2.25*2.8)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 646, Kick.S]
type = Explod
trigger1 = animelem = 3
anim = 7017
id = 7017
bindtime = -1
postype = p1
pos = 24, -8
ownpal = 0
scale = 0.6, 0.6
sprpriority = 3
removetime = -2

[State 646, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 70,12
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 13,15
sparkno = -1
sparkxy = -10, -20
hitsound = S1, 5
guardsound = S2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12
fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 4
pos = 26,-9
size.xscale = 0.8
size.yscale = 0.8
ignorehitpause = 1
persistent = 0

[State 646, GroundBorder]
type = PosSet
trigger1 = Pos Y > 0
y = 0
[State 646, Turn]
type = Turn
triggerall = Pos y = 0
trigger1 = p2bodydist x <= -15
ignorehitpause = 1
persistent =1

[State 646, PlayerPush]
type = PlayerPush
triggerall = movecontact
trigger1 = hitcount >= 5
value = 0

[State 646, Sucess]
type = Changestate
triggerall = hitcount < 5
trigger1 = movecontact
trigger2 = FrontEdgeBodyDist < 5
trigger3 = Pos Y = 0
value = 647
[State 646, Fail]
type = Changestate
trigger1 = animtime = 0
value = 50

;---------------------------------------------------------------------------
;Angel Bird End
[Statedef 647]
type = A
movetype = A
physics = A
juggle = 0
ctrl = 0
anim = 49

[State 647, velcet]
type = velset
trigger1 = time = 0
x = -3
y = -6

[State 647, end]
type = ChangeState
trigger1 = time = 60
value = 50
ctrl = 0

;---------------------------------------------------------------------------
;Maiden Star X
[Statedef 690]
type    = A
movetype= A
physics = A
juggle  = 0
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 690

[state 260, ColorFX]
type = PalFX
triggerall = time > 40
trigger1 =TimeMod = 9,0
time = 2
add = 64,64,64

[State 260, VarSet Lv 1]
type = VarSet
trigger1 = time <= 15
v = 27
value = 0
persistent = 1

[State 260, VarSet Lv 2]
type = VarSet
trigger1 = time >= 16
v = 27
value = 1
persistent = 1

[State 690, Sound]
type = PlaySnd
trigger1 = Time = 40
value = 2100, 1
volume = -90

[State 690, ChangeAnim]
type = ChangeAnim
trigger1 = command != "hold_x" && animelemtime(2) < 0
value = 690
elem = 2

[State 690, Sound]
type = PlaySnd
trigger1 = Time = 1
value = 105, 2
volume = -150

[State 690, Voice]
type = PlaySnd
triggerall = command = "hold_x"
trigger1 = Time = 5 && random >= 570
value = 3, 15+random%2
volume = -50
channel = 0

[State 690, Voice]
type = PlaySnd
triggerall = command != "hold_x"
trigger1 = Time = 5 && random >= 570
value = 3, 2
channel = 0

[State 690, Still]
type = VelSet
trigger1 = 1
y = 0
x = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 50

[State 690, 6]
type = ChangeState
trigger1 = animtime = 0
value = 691
;---------------------------------------------------------------------------
;Maiden Star/Continue
[Statedef 691]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = -50
sprpriority = 2
anim = 691

[State 691, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 691, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 105, 3
volume = -150+(var(27)*70)

[State 691, AfterImage]
type = AfterImage
trigger1 = time = 4
time = 20
length = 10
palinvertall = 0
palcolor = 256
palbright = 10,10,10
palcontrast = 90,30,100
paladd = 25,30,35
palmul = .45,.65,.75
timegap = 1
framegap = 1
trans = Add

[State 691, Sparkles-1]
type = Explod
triggerall = var(27)= 1
triggerall = time > 0
trigger1 = Time % 4 = 0
anim = 11551
id = 11559
postype = p1
pos = -25+random%30, -65+random%30
vel = 0.4,0.4
accel = 0.01, 0.02
ownpal = 0
scale = 0.25, 0.25
sprpriority = 1
removetime = -2

[State 691, Sparkles-2]
type = Explod
triggerall = var(27)= 1
triggerall = time > 0
trigger1 = Time % 5 = 0
anim = 11559
id = 11559
postype = p1
pos = -25+random%25, -65+random%25
vel = 0.5,0.5
accel = 0.02,0.04
ownpal = 0
scale = 0.2, 0.2
sprpriority = 1
removetime = -2

[State 691, VelSet]
type = VelSet
trigger1 = time >= 1
y = 8 +var(27)*2.5
x = 9.2 +var(27)*2.5

[State 691, NotHitBy]
type = NotHitBy
Trigger1 = var(27) = 1
value = SCA, NA, NP, SA, SP
time = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = var(27)!= 1
attr = SCA, AA, AP, AT
stateno = 50

[State 691, HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 55+(var(27)*15),13+(var(27)*15)
hitflag = MAFD
guardflag = HA
pausetime = 6,12
sparkno = -1
sparkxy = -9,-9
hitsound   = S1,7
guardsound = s2,0
animtype = Back
ground.type = High
ground.slidetime = 9
ground.hittime  = 23
ground.velocity = -3,5
air.velocity = -3,5
fall = 1
fall.recover = 0
envshake.time = 5+var(27)*3
envshake.freq = 140+var(27)*20
envshake.ampl = -2-var(27)*2
envshake.phase = 90+var(27)

[State 691, Sparks]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = 30, -10
ignorehitpause = 1
persistent = 0
postype = p1    ;p2,front,back,left,right
supermovetime = 999
pausemovetime = 999
ownpal = 1

[State 691, GroundBorder]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 691, Turn]
type = Turn
triggerall = Pos y = 0
trigger1 = p2bodydist x <= -15
ignorehitpause = 1
persistent =1

[State 691, Movecontact]
type = ChangeState
trigger1 = FrontEdgeBodyDist < 5
value = 692

[State 691, Next]
type = ChangeState
trigger1 = Pos Y = 0
value = 692
;---------------------------------------------------------------------------
;Maiden Star End
[Statedef 692]
type    = S
movetype= A
physics = A
juggle  = 5
velset = 1,0
ctrl = 0
poweradd = 0
sprpriority = 2
anim = 49

[State 692, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 692, reset]
type = VarSet
trigger1 = 1
v = 27
value = 0

[State 692, VelSet]
Type = VelSet
trigger1 = p2bodydist x > -15
trigger1 = time = 0
x = -2.5
y = -5.7

[State 692, VelSet]
Type = VelSet
trigger1 = p2bodydist x <= -15
trigger1 = time = 0
x = -3.2
y = -5.7

[State 692, AfterImage]
type = AfterImage
trigger1 = time = 10
time = 0
length = 1
palinvertall = 0
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add

[State 692, Next]
type = ChangeState
triggerall = var(3) != 1
trigger1 = animtime = 0 && Pos Y >= 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = animtime = 0 && Pos Y < 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1
trigger1 = AnimTime = 0
value = 1006
ctrl = 0
;---------------------------------------------------------------------------
;Maiden Star Y
[Statedef 693]
type    = A
movetype= A
physics = A
juggle  = 0
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 690

[state 260, ColorFX]
type = PalFX
triggerall = time > 40
trigger1 =TimeMod = 9,0
time = 2
add = 64,64,64

[State 260, VarSet Lv 1]
type = VarSet
trigger1 = time <= 15
v = 27
value = 0
persistent = 1

[State 260, VarSet Lv 2]
type = VarSet
trigger1 = time >= 16
v = 27
value = 1
persistent = 1

[State 693, Sound]
type = PlaySnd
trigger1 = Time = 40
value = 2100, 1
volume = -90

[State 693, ChangeAnim]
type = ChangeAnim
trigger1 = command != "hold_y" && animelemtime(2) < 0
value = 690
elem = 2

[State 693, Sound]
type = PlaySnd
trigger1 = Time = 1
value = 105, 2
volume = -150

[State 693, Voice]
type = PlaySnd
triggerall = command = "hold_y"
trigger1 = Time = 5 && random >= 570
value = 3, 15+random%2
volume = -50
channel = 0

[State 693, Voice]
type = PlaySnd
triggerall = command != "hold_y"
trigger1 = Time = 5 && random >= 570
value = 3, 2
channel = 0

[State 693, Still]
type = VelSet
trigger1 = 1
y = 0
x = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 50

[State 693, 6]
type = ChangeState
trigger1 = animtime = 0
value = 694
;---------------------------------------------------------------------------
;Maiden Star/Continue
[Statedef 694]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = -80
sprpriority = 2
anim = 691

[State 694, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 694, Sound]
type = PlaySnd
trigger1 = Time = 0
value = 105, 3
volume = -150+(var(27)*70)

[State 694, AfterImage]
type = AfterImage
trigger1 = time = 4
time = 20
length = 10
palinvertall = 0
palcolor = 256
palbright = 10,10,10
palcontrast = 90,30,100
paladd = 25,30,35
palmul = .45,.65,.75
timegap = 1
framegap = 1
trans = Add

[State 691, Sparkles-1]
type = Explod
triggerall = var(27)= 1
triggerall = time > 0
trigger1 = Time % 4 = 0
anim = 11551
id = 11559
postype = p1
pos = -25+random%30, -65+random%30
vel = 0.4,0.4
accel = 0.01, 0.02
ownpal = 0
scale = 0.25, 0.25
sprpriority = 1
removetime = -2

[State 691, Sparkles-2]
type = Explod
triggerall = var(27)= 1
triggerall = time > 0
trigger1 = Time % 5 = 0
anim = 11559
id = 11559
postype = p1
pos = -25+random%25, -65+random%25
vel = 0.5,0.5
accel = 0.02,0.04
ownpal = 0
scale = 0.2, 0.2
sprpriority = 1
removetime = -2

[State 694, VelSet]
type = VelSet
trigger1 = time >= 1
y = 8.2 +var(27)*2.5
x = 9.5 +var(27)*2.5

[State 694, NotHitBy]
type = NotHitBy
Trigger1 = var(27) = 1
value = SCA, NA, NP, SA, SP
time = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = var(27)!= 1
attr = SCA, AA, AP, AT
stateno = 50

[State 694, HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 75+(var(27)*15),23+(var(27)*15)
hitflag = MAFD
guardflag = HA
pausetime = 8,15
sparkno = -1
sparkxy = -9,-9
hitsound   = S1,7
guardsound = s2,0
animtype = Back
ground.type = High
ground.slidetime = 9
ground.hittime  = 23
ground.velocity = -3,5
air.velocity = -3,5
fall = 1
fall.recover = 0
envshake.time = 5+var(27)*3
envshake.freq = 140+var(27)*20
envshake.ampl = -2-var(27)*2
envshake.phase = 90+var(27)

[State 694, Sparks]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = 30, -10
ignorehitpause = 1
persistent = 0
postype = p1    ;p2,front,back,left,right
supermovetime = 999
pausemovetime = 999
ownpal = 1

[State 694, GroundBorder]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 694, Turn]
type = Turn
triggerall = Pos y = 0
trigger1 = p2bodydist x <= -15
ignorehitpause = 1
persistent =1

[State 694, Movecontact]
type = ChangeState
trigger1 = FrontEdgeBodyDist < 5
value = 692

[State 694, Next]
type = ChangeState
trigger1 = Pos Y = 0
value = 695
;---------------------------------------------------------------------------
;Maiden Star End
[Statedef 695]
type    = S
movetype= A
physics = A
juggle  = 5
velset = 1,0
ctrl = 0
poweradd = 0
sprpriority = 2
anim = 49

[State 695, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 695, reset]
type = VarSet
trigger1 = 1
v = 27
value = 0

[State 695, VelSet]
Type = VelSet
trigger1 = p2bodydist x > -15
trigger1 = time = 0
x = -2.5
y = -5.7

[State 695, VelSet]
Type = VelSet
trigger1 = p2bodydist x <= -15
trigger1 = time = 0
x = -3.2
y = -5.7

[State 695, AfterImage]
type = AfterImage
trigger1 = time = 10
time = 0
length = 1
palinvertall = 0
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
timegap = 1
framegap = 1
trans = Add

[State 695, Next]
type = ChangeState
triggerall = var(3) != 1
trigger1 = animtime = 0 && Pos Y >= 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = animtime = 0 && Pos Y < 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;---------------------------------------------------------------------------
;Maiden's Burst
[Statedef 750]
type    = S
movetype= A
physics = S
juggle  = 5
ctrl = 0
velset = 0,0
anim = 750
poweradd = -500
sprpriority = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,HA,HP,HT
time = 1

[State 10000, aura 1A]
type = Explod
trigger1 = random < 150
anim = 7100
ID = 7100
pos = -25+(random%40),-40+(random%30)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
random = 10,50
supermove = 1
scale = .2,.2
sprpriority = 3
ownpal = 0
pausemovetime   = 1000
accel = -0.04,-0.03

[State 10000, aura 1B]
type = Explod
trigger1 = random < 150
anim = 7100
ID = 7100
pos = -15+(random%40),-40+(random%30)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
random = 10,50
supermove = 1
scale = .2,.2
sprpriority = 3
ownpal = 0
pausemovetime   = 1000
accel = 0.04,-0.03

[State 10000, aura 2A]
type = Explod
trigger1 = random < 250
anim = 7101
ID = 7100
pos = -20+(random%20),-5-(random%15)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
random = 10,20
supermove = 1
scale = .2,.2
sprpriority = ifelse(random<500,-3,3)
ownpal = 0
pausemovetime   = 1000
accel = -0.05,0

[State 10000, aura 2B]
type = Explod
trigger1 = random < 150
anim = 7101
ID = 7100
pos = 10+(random%20),-5-(random%15)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
random = 10,20
supermove = 1
scale = .2,.2
sprpriority = ifelse(random<500,-3,3)
ownpal = 0
pausemovetime   = 1000
accel = 0.05,0

[State 10000, aura 3]
type = Explod
trigger1 = random < 150
anim = 7102
ID = 7100
pos = -10+(random%20),-40+(random%40)
postype = p1
facing = ifelse(random>500,-1,1)
vfacing = 1
bindtime = 1
random = 10,50
supermove = 1
scale = .2,.2
sprpriority = ifelse(random<500,-3,3)
ownpal = 0
pausemovetime   = 1000
accel = 0, -0.05

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 4
id = 7100

[State 0, PalFXWiz]
type = PalFX
trigger1 = Animelem = 2
time = 30
add = 20,20,40
mul = 255,255,255
sinadd = 20,20,40,10
invertall = 0
color = 200

[State 0, Intro Fx] ; Intro Effect for Aura Fx
type = Explod
triggerall = pos y = 0
trigger1 = Time = 0
anim = 7014
pos = 0 ,0
postype = p1
scale = .95,.90
facing = -1
bindtime = 1
sprpriority = 2
ownpal = 1

[State 730, EnvColor]
type = EnvColor
trigger1 = Animelem = 2
value = 255,255,255
time = 3
under = 0

[State 200, Voice]
type = playsnd
trigger1 = time = 4
value = 3,9
volume = 500
channel = 0

[State 200, Wind A]
type = playsnd
trigger1 = time = 0
value = 3100,0
volume = -50

[State 200, Wind B]
type = playsnd
trigger1 = Animelem = 2
value = 730,1
volume = -70
channel = 5

[State 200, Intro]
type = playsnd
trigger1 = Animelem = 2
value = 730,0
channel = 1
volume = -100
persistent = 0

[State 200, End]
type = playsnd
trigger1 = Animelem = 4
value = 730,0
channel = 3
volume = -180
persistent = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = power < 2000 && Timemod = 15,13
time = 5
freq = 30
ampl = -1

[State 0, EnvShake]
type = EnvShake
trigger1 = power >= 2000 && Timemod = 15,13
time = 10
freq = 150
ampl = -1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 0, Dust front]
type = Explod
triggerall = pos y = 0
trigger1 = Timemod = 15,5
anim = 7001
ID = 7001
pos = ifelse(power < 2000 ,-10, -20) ,3
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .8,.8
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 0, Dust Back]
type = Explod
triggerall = pos y = 0
trigger1 = Timemod = 15,5
anim = 7001
ID = 7001
pos = ifelse(power < 2000 ,10, 20) ,3
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .8,.8
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 0, Combination Fx]
type = Explod
triggerall = pos y = 0
trigger1 = Timemod = 15,5
anim = 7730
ID = 7730
pos = 0 ,40
postype = p1
facing = -1
bindtime = 1
sprpriority = 1
ownpal = 1

[State 0, Ground Fx]
type = Explod
triggerall = pos y = 0
trigger1 = Timemod = 20,5
anim = 7731
ID = 7731
pos = 0 ,0
postype = p1
facing = ifelse(random>=500,1,-1)
bindtime = -1
sprpriority = 0
ownpal = 1

[State 0, aura]
type = Explod
trigger1 = time = 7
anim = 7011
ID = 7011
pos = 0,5
bindtime = -1
removetime = 40
scale = 0.8,0.65
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 0, Ki end]
type = Explod
triggerall = pos y = 0
trigger1 = Time = 40
anim = 7015
pos = 4, 2
postype = p1
scale = .6,.6
facing = -1
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1

[State 750, HitDef]
type = HitDef
trigger1 = !time
attr = SCA, SP
animtype  = Hard
damage    = 50
priority = 7, Miss
guardflag = MA
pausetime = 7,8
sparkno = -1
sparkxy = -27,-78
hitsound   = S1,4
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -6,-7.5
air.velocity = -5,-6
fall = 1
air.fall = 1
fall.recover = 1
envshake.time = 11
envshake.freq = 140
envshake.ampl = -4
envshake.phase = 90

[State 750, Helper]
type = Helper
trigger1 = animelem = 2
helpertype = normal ;player
name = "Kanji"
ID = 19000
stateno = 19000
pos = 10 +(random%10),-77 +(random%10)
postype = p1    ;p2,front,back,left,right
sprpriority = 20
supermovetime = 999
pausemovetime = 999
size.xscale = .5
size.yscale = .5
ownpal = 1

[State 0, ChangeState]
type = ChangeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Jud Throw - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, HitOverride]
type = HitOverride
trigger1 = (PrevStateNo != 8030)
time = 1
slot = 1
attr = SCA, AA, AP
stateno = 8030

[State 800, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 800, 1]
type = HitDef
Trigger1 = animelem = 2
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 2, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2                      ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Jud Throw - Successful
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0
sprpriority = 1

[State 330, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Jud Voice]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255
channel = 0
[State 810, Throw Sound]
type = PlaySnd
trigger1 = time = 17
value = 105, 2
volume = -60
channel = 1
[State 810, Grab Sound]
type = PlaySnd
trigger1 = time = 0
value = 800, 0
channel = 2

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 31, -34

[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 25, -39

[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 18, -59

[State 810, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = -4, -73

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5
pos = -30, -35

[State 810, Bind 6]
type = TargetBind
trigger1 = AnimElem = 6
pos = -30, 0

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 25
time = 10
freq = 20
ampl = -5
phase = 20
ignorehitpause = 1
persistent = 1

[State 820, NotHitBy]
type = NotHitBy
Trigger1 = Time >= 0
value = SCA
time = 10

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -50

[State 810, Throw]
type = TargetState
trigger1 = AnimElem = 6
value = 821

[State 810, Turn]
type = Turn
trigger1 = Animtime = 0

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Jud Thrown P2 state
[Statedef 820] ;(custom gethit state)
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 5
value = 3

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 820, HitBy]
type = HitBy
Trigger1 = Time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
;Jud Thrown - thrown into the air
[Statedef 821]
type    = A
movetype= H
physics = A
velset = 2.5,-6.5
poweradd = 40
sprpriority = 1

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Pos Y = 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
;Frog Jump - Attempt
[Statedef 830]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 830
sprpriority = 3

[State 800, HitOverride]
type = HitOverride
trigger1 = (PrevStateNo != 8030)
time = 1
slot = 1
attr = SCA, AA, AP
stateno = 8030

[State 800, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 800, 1]
type = HitDef
Trigger1 = animelem = 2
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 5, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2                      ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 840       ;On success, KFM changes to state 810
p2stateno = 850       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Frog Jump - Successful
[Statedef 840]
type    = S
movetype= A
physics = N
anim = 840
poweradd = 0
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 840, Frog Voice]
type = PlaySnd
trigger1 = time = 2
value = 3,5+(random%4)
volume = 255
channel = 0
[State 840, Hit/Kick Sound]
type = PlaySnd
trigger1 = time = 11
value = 1, 4
channel = 1
[State 840, Grab Sound]
type = PlaySnd
trigger1 = time = 0
value = 800, 0
channel = 2

[State 840, Bind]
type = TargetBind
trigger1 = time <= 12
pos = 20, 0

[State 840, VelSet]
type = VelSet
trigger1 = time = 13
x = -4.9
y = -6.5
[State 851, 2] ;Gravity
type = VelAdd
Trigger1 = Time > 13
y = 0.22
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 13
type    = S
movetype= A
physics = A

[State 820, NotHitBy]
type = NotHitBy
Trigger1 = Time >= 0
value = SCA
time = 10

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = -50

[State 810, Throw]
type = TargetState
trigger1 = time = 13
value = 851

[State 810, Helper]
type = Helper
trigger1 = time = 13
helpertype = Normal
ID = 8001
stateno = 8001
sprpriority = 3
pos = 27,-35
size.xscale = 1.2
size.yscale = 1.2
ignorehitpause = 1
persistent = 0

[State 810, Turn]
type = Turn
trigger1 = Animtime = 0

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Frog Jump P2 state
[Statedef 850] ;(custom gethit state)
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 850

[State 820, HitBy]
type = HitBy
Trigger1 = Time >= 0
value = SCA
time = 1

[State 820, End]
type = ChangeState
trigger1 = Time >= 40
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Frog Jump - thrown into the air
[Statedef 851]
type    = A
movetype= H ;Get hit
physics = N
velset = -5.5,-4.5
ctrl = 0
sprpriority = 2

[State 851, Animation]
type = ChangeAnim2
trigger1 = time = 0
value = 851

[State 851, 2] ;Gravity
type = VelAdd
Trigger1 = Time > 0
y = 0.44

[State 851, Damage]
type = LifeAdd
Trigger1 = Time = 0
value = -40

[State 851, SelfState] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5100 ;Hit ground
;---------------------------------------------------------------------------
; Fireball
[Statedef 1500] ;lugar onde ser definido o projetil esquerdo
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= -100
ctrl = 0
anim = 1500

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 1

[State 0, Explod] ;definio para a animao do efeito do disparo
type = Explod
triggerall = anim = 1500
trigger1 = AnimElem = 2
anim = 6000
ID = 6000
pos = 32,-46;;32,-43
postype = p1
bindtime = 1
removetime = -2
scale = .25,.25
sprpriority = 3
shadow = 0,0,0
ownpal = 1

[State 0, Helper] ;propriedade do projetil, incluido a animao do efeito da magia.
type = Helper
triggerall = anim = 1500
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7002
stateno = 7002
pos = 26,-46
postype = p1
size.xscale = 0.10
size.yscale = 0.12

[State 210, 5] ;definio do fim do projetil esquerdo
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Fireball
[Statedef 1500] ;lugar onde ser definido o projetil esquerdo
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= -100
ctrl = 0
anim = 1500

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 1

[State 0, Explod] ;definio para a animao do efeito do disparo
type = Explod
triggerall = anim = 1500
trigger1 = AnimElem = 2
anim = 6000
ID = 6000
pos = 32,-46;;32,-43
postype = p1
bindtime = 1
removetime = -2
scale = .25,.25
sprpriority = 3
shadow = 0,0,0
ownpal = 1

[State 0, Helper] ;propriedade do projetil, incluido a animao do efeito da magia.
type = Helper
triggerall = anim = 1500
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7002
stateno = 7002
pos = 26,-46
postype = p1
size.xscale = 0.10
size.yscale = 0.12

[State 210, 5] ;definio do fim do projetil esquerdo
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fireball 2
[Statedef 1501]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= -100
ctrl = 0
anim = 1501

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1501
trigger1 = AnimElem = 2
anim = 6000
ID = 6000
pos = 22,-44
postype = p1
bindtime = 1
removetime = -2
scale = .25,.25
sprpriority = 3
shadow = 0,0,0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = anim = 1501
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7002
stateno = 7002
pos = 16,-44
postype = p1
size.xscale = 0.10
size.yscale = 0.12

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air down Fireball
[Statedef 1504]
type    = A
movetype= I
physics = A
juggle  = 4
poweradd= -100
ctrl = 0
anim = 1504

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = pos y <= -20
trigger1 = !time && p2bodydist y <= 30
value = 1502
elem = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 1

[State 0, VarSet]
type = VarSet ;null
triggerall = PrevStateNo = [1006,1011]
trigger1 = !time && var(3) != 1
v = 3
value = 1

[State 0, Helper]
type = Helper
triggerall = anim = 1504
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "handfx"
ID = 6001
stateno = 6001
pos = 16,-40
postype = p1
ownpal = 0
size.xscale = 0.25
size.yscale = 0.25

[State 0, Helper]
type = Helper
triggerall = anim = 1504
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7008
stateno = 7008
pos = 18,-34
postype = p1
ownpal = 0
size.xscale = 0.10
size.yscale = 0.12

[State 0, Explod]
type = Explod
triggerall = anim = 1502
trigger1 = AnimElem = 2
anim = 6000
ID = 6000
postype = p1
pos = 29,-49
bindtime = 20
scale = .25,.25
sprpriority = 3
shadow = 0,0,0
ownpal = 1
removetime = -2

[State 0, Helper]
type = Helper
triggerall = anim = 1502
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7002
stateno = 7002
pos = 25,-49
postype = p1
ownpal = 0
size.xscale = 0.10
size.yscale = 0.12


;-----------------------------------------------------Forma efetiva-----------------------------------------------------
;----------------------Modo Pulo!(Condio de movimento, no fixo ao ar)----------------------------
[State 0, VelMul]
type = VelMul
triggerall = var(3) != 1;Pulo
trigger1 = anim = 1504 && anim != 1502
trigger1 = time < 9;12
x = .9
y = .9

[State 0, VelSet]
type = VelSet
triggerall = var(3) != 1;Pulo
trigger1 = anim = 1504 && anim != 1502
trigger1 = AnimElem = 2,1
y = -2
;----------------------Modo Pulo!(modo diagonal)----------------------------
[State 0, VelMul]
type = VelMul
triggerall = var(3) != 1;Pulo
trigger1 = anim = 1502 && anim != 1504
trigger1 = time < 9;12
x = .9
y = .7

[State 0, VelSet]
type = VelSet
triggerall = var(3) != 1;Pulo
trigger1 = Anim = 1502 && anim != 1504
trigger1 = AnimElem = 2,1
y = 0
;----------------------------------------------------Forma efetiva-----------------------------------------------------
[State 0, VelSet]
type = VelSet
triggerall = var(3) = 1;Fly
trigger1 = 1
x = 0
y = 0
;-------------------------------------------------------------------------------------------------------------------------------
;-------------------------------------------------------------------------------------------------------------------------------


[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl =  1

;---------------------------------------------------------------------------
; Air down Fireball 2
[Statedef 1505]
type    = A
movetype= I
physics = A
juggle  = 4
poweradd= -100
ctrl = 0
;velset = 0,0
anim = 1505

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = pos y <= -20
trigger1 = !time && p2bodydist y <= 30
value = 1503
elem = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 20
value = 1

[State 0, VarSet]
type = VarSet ;null
triggerall = PrevStateNo = [1006,1011]
trigger1 = !time && var(3) != 1
v = 3
value = 1

[State 0, Helper]
type = Helper
triggerall = anim = 1505
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "handfx"
ID = 6002
stateno = 6002
pos = 20,-42;28,-40
postype = p1
ownpal = 0
size.xscale = 0.25
size.yscale = 0.25

[State 0, Helper]
type = Helper
triggerall = anim = 1505
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7008
stateno = 7008
pos = 17,-37; Fire Ball Para Baixo
postype = p1
ownpal = 0
size.xscale = 0.10
size.yscale = 0.12

[State 0, Explod]
type = Explod
triggerall = anim = 1503
trigger1 = AnimElem = 2
anim = 6000
ID = 6000
postype = p1
pos = 19,-50
bindtime = 20
scale = .25,.25
sprpriority = 3
shadow = 0,0,0
ownpal = 1
removetime = -2

[State 0, Helper]
type = Helper
triggerall = anim = 1503
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "fireball"
ID = 7002
stateno = 7002
pos = 15,-50
postype = p1
ownpal = 0
size.xscale = 0.10
size.yscale = 0.12


;-----------------------------------------------------Forma efetiva-----------------------------------------------------
;----------------------Modo Pulo!(Condio de movimento no fixo ao ar)----------------------------
[State 0, VelMul]
type = VelMul
triggerall = var(3) != 1;Pulo
trigger1 = anim = 1505 && anim != 1503
trigger1 = time < 9;12
x = .9
y = .9

[State 0, VelSet]
type = VelSet
triggerall = var(3) != 1;Pulo
trigger1 = anim = 1505 && anim != 1503
trigger1 = AnimElem = 2,1
y = -2
;----------------------Modo Pulo!(modo diagonal)----------------------------
[State 0, VelMul]
type = VelMul
triggerall = var(3) != 1;Pulo
trigger1 = anim = 1503 && anim != 1505
trigger1 = time < 9;12
x = .9
y = .7

[State 0, VelSet]
type = VelSet
triggerall = var(3) != 1;Pulo
trigger1 = Anim = 1503 && anim != 1505
trigger1 = AnimElem = 2,1
y = 0
;----------------------------------------------------Forma efetiva-----------------------------------------------------
[State 0, VelSet]
type = VelSet
triggerall = var(3) = 1;Fly
trigger1 = 1
x = 0
y = 0
;-------------------------------------------------------------------------------------------------------------------------------
;-------------------------------------------------------------------------------------------------------------------------------


[State 0, ChangeState]
type = ChangeState
triggerall = var(3) != 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl =  1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Double Kaiko Dan - Begin
[Statedef 1510]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1510

[State 0, VarSet Lv 1]
type = VarSet
triggerall = command != "hold_c" || command = "hold_c"
trigger1 = time <= 30
v = 27
value = 0
persistent = 1

[State 0, VarSet Lv 2]
type = VarSet
triggerall = command = "hold_c"
trigger1 = time = [31,50]
v = 27
value = 1
persistent = 1

[State 0, VarSet Lv 3]
type = VarSet
triggerall = command = "hold_c"
trigger1 = time = [51,75]
v = 27
value = 2
persistent = 1

[State 0, VarSet Lv 4]
type = VarSet
triggerall = command = "hold_c"
trigger1 = time = [76,100]
v = 27
value = 3
persistent = 1

[State 0, VarSet Lv 5]
type = VarSet
triggerall = command = "hold_c"
trigger1 = time > 100
v = 27
value = 4
persistent = 1

[State 1510, Voice]
type = PlaySnd
trigger1 = time = 20 && random >= 570
trigger1 = command = "hold_c"
value = 3,20+random%2
volume = -50
channel = 0

[State 1510, FXsound]
type = PlaySnd
trigger1 = animelem = 2
value = 300,2
volume = -55

[State 1510, Sound]
type = PlaySnd
trigger1 = time = 100
value = 300, 3
volume = -55
channel = 2

[State 7015, Shockwave]
type = Explod
trigger1 = time = 100
anim = 8016
id = 8016
postype = p1
pos = -13, -52
scale = 0.17,0.17
sprpriority = 3
ownpal = 1

[State 1510, HandExplodA]
type = Explod
triggerall = time < 100
trigger1 = animelem = 2
anim = 7007
id = 7007
postype = p1
pos = -13, -52
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.15, 0.15
sprpriority = 3

[State 1510, HandExplodB]
type = Explod
triggerall = time < 100
trigger1 = animelem = 2
anim = 7007
id = 7007
postype = p1
pos = 3,-51
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.08, 0.08
sprpriority = -1

[State 1510, BigHandExplodA]
type = Explod
trigger1 = time = 100
anim = 7008
id = 7008
postype = p1
pos = -13, -52
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.19, 0.19
sprpriority = 3

[State 1510, BigHandExplodB]
type = Explod
trigger1 = time = 100
anim = 7008
id = 7008
postype = p1
pos = 3,-51
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.12, 0.12
sprpriority = -1

[State 0, StopSnd]
type = StopSnd
trigger1 = time >= 15 && command != "hold_c"
channel = -1
persistent = 1

[State 1510, Explod-Remove]
type = RemoveExplod
trigger1 = !(command = "hold_c")
id = 8016

[State 1510, End]
type = ChangeState
trigger1 = time >= 15 && !(command = "hold_c")
value = 1511

;---------------------------------------------------------------------------
;Double Kaiko Dan - End
[Statedef 1511]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1511

[State 1511, PlaySND-Shoot]
type = PlaySnd
trigger1 = !time
value = 300,5
volume = 155

[State 1511, PlaySND-Shoot support]
type = PlaySnd
trigger1 = !time
value = 300,6
volume = 255

[State 0, HandExplod]
type = Explod
trigger1 = AnimElem = 1
anim = 7000
ID = 7000
pos = 40,-48
postype = p1
facing = -1
bindtime = 1
removetime = -2
scale = 0.25+(var(27)*0.03),0.25+(var(27)*0.03)
sprpriority = 3
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = (-180-var(27)*45)

[State 1511,Kaiko Dan.Helper]
type = Helper
trigger1 = AnimElem = 1
name = "Kaiko Dan"
stateno = 7013
postype = p1
pos = 10,-48
keyctrl = 0
ownpal = 1
id =7013
size.xscale = 0.15+(var(27)*0.03)
size.yscale = 0.23+(var(27)*0.05)

[State 1511, Hand Explod-Remove]
type = RemoveExplod
trigger1 = !time
id = 7007

[State 1511, Hand Explod-Remove]
type = RemoveExplod
trigger1 = !time
id = 7008

[State 1511, reset]
type = VarSet
trigger1 = animtime = 0
v = 27
value = 0

[State 1511, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Air Double Kaiko Dan - Begin
[Statedef 1512]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
anim = 1512

[State 1021, VelMul]
Type = VelMul
trigger1 = time
x = 0.9
y = 0.9

[State 0, VarSet Lv 1]
type = VarSet
triggerall = command != "hold_c" || command = "hold_c"
trigger1 = time <= 40
v = 27
value = 0
persistent = 1

[State 0, VarSet Lv 2]
type = VarSet
triggerall = command = "hold_c"
trigger1 = time = [41,69]
v = 27
value = 1
persistent = 1

[State 0, VarSet Lv 3]
type = VarSet
triggerall = command = "hold_c"
trigger1 = time >= 70
v = 27
value = 2
persistent = 1

[State 1512, Voice]
type = PlaySnd
triggerall = command = "hold_c" && !(command != "hold_c")
trigger1 = time = 10 && random >= 170
value = 3,20+random%2
volume = -50
channel = 0

[State 1512, FXsound]
type = PlaySnd
trigger1 = animelem = 1
value = 300,2
volume = -55

[State 1512, Sound]
type = PlaySnd
trigger1 = time = 70
value = 300, 3
volume = -55
channel = 2

[State 7015, Shockwave]
type = Explod
trigger1 = time = 70
anim = 8011
id = 8011
postype = p1
pos = -23, -52
scale = 0.19,0.19
sprpriority = 3
ownpal = 1

[State 1512, HandExplod]
type = Explod
triggerall = time < 100
trigger1 = animelem = 1
anim = 7007
id = 7007
postype = p1
pos = -23, -52
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.15, 0.15
sprpriority = 2

[State 1510, BigHandExplodB]
type = Explod
trigger1 = time = 70
anim = 7008
id = 7007
postype = p1
pos = -23,-52
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.2, 0.2
sprpriority = 2

[State 0, StopSnd]
type = StopSnd
trigger1 = time >= 10 && command != "hold_c"
channel = -1
persistent = 1

[State 1512, End]
type = ChangeState
trigger1 = time >= 10 && !(command = "hold_c")
trigger2 = time = 100
value = 1513

;---------------------------------------------------------------------------
;Air Double Kaiko Dan - End
[Statedef 1513]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 1513

[State 1513, VelSetY]
Type = VelSet
trigger1 = time = [1,6]
x = 0
y = 0

[State 1513, VelSetY]
Type = VelSet
trigger1 = time = 7
x = -2.5
y = -7.0

[State 1513, VelSetY]
Type = VelSet
Trigger1 = !Time
y = 0

[State 1513, PlaySND-Shoot]
type = PlaySnd
trigger1 = !time
value = 300,5
volume = 155

[State 1513, PlaySND-Shoot support]
type = PlaySnd
trigger1 = !time
value = 300,6
volume = 255

[State 0, HandExplod]
type = Explod
trigger1 = AnimElem = 1
anim = 7006
ID = 7006
pos = 37,-21
postype = p1
facing = -1
bindtime = 1
removetime = -2
scale = 0.25+(var(27)*0.05),0.25+(var(27)*0.05)
sprpriority = 3
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = (-180-var(27)*65)

[State 1513,Kaiko Dan.Helper]
type = Helper
trigger1 = AnimElem = 1
name = "Kaiko Dan"
stateno = 7014
postype = p1
pos = 20,-35
keyctrl = 0
ownpal = 1
id =7014
size.xscale = 0.15+(var(27)*0.05)
size.yscale = 0.23+(var(27)*0.07)

[State 1513, Hand Explod-Remove]
type = RemoveExplod
trigger1 = !time
id = 7007

[State 0, Changeanim]
type = Changeanim
triggerall = var(3) != 1
trigger1 = AnimTime = 0
value = 49

[State 0, CtrlSet]
type = CtrlSet
triggerall = var(3) != 1
trigger1 = Time = 15
value = 1

[State 0, reset]
type = VarSet
trigger1 = animtime = 0 || var(3) != 1 && Time = 15
v = 27
value = 0

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl =  1

;---------------------------------------------------------------------------
;Double Kaiko Dan - Chain
[Statedef 1514]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1510

[State 1514, Voice]
type = PlaySnd
trigger1 = time = 20 && random >= 570
trigger1 = command = "hold_c"
value = 3,20+random%2
volume = -50
channel = 0

[State 1514, FXsound]
type = PlaySnd
trigger1 = animelem = 2
value = 300,2
volume = -55

[State 1514, Sound]
type = PlaySnd
trigger1 = time = 100
value = 300, 3
volume = -55
channel = 2

[State 1514, Shockwave]
type = Explod
trigger1 = time = 100
anim = 8016
id = 8016
postype = p1
pos = -13, -52
scale = 0.17,0.17
sprpriority = 3
ownpal = 1

[State 1514, HandExplodA]
type = Explod
triggerall = time < 100
trigger1 = animelem = 2
anim = 7007
id = 7007
postype = p1
pos = -13, -52
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.15, 0.15
sprpriority = 3

[State 1514, HandExplodB]
type = Explod
triggerall = time < 100
trigger1 = animelem = 2
anim = 7007
id = 7007
postype = p1
pos = 3,-51
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.08, 0.08
sprpriority = -1

[State 1514, BigHandExplodA]
type = Explod
trigger1 = time = 100
anim = 7008
id = 7008
postype = p1
pos = -13, -52
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.19, 0.19
sprpriority = 3

[State 1514, BigHandExplodB]
type = Explod
trigger1 = time = 100
anim = 7008
id = 7008
postype = p1
pos = 3,-51
vel = 0, 0
bindtime = -1
removetime = -1
removeongethit = 1
accel = 0, 0
ownpal = 1
scale = 0.12, 0.12
sprpriority = -1

[State 1514, StopSnd]
type = StopSnd
trigger1 = time >= 15 && command != "hold_c"
channel = -1
persistent = 1

[State 1514, Explod-Remove]
type = RemoveExplod
trigger1 = !(command = "hold_c")
id = 8016

[State 1514, PlaySND-Shoot]
type = PlaySnd
trigger1 = !time
value = 300,5
volume = 155

[State 1514, PlaySND-Shoot support]
type = PlaySnd
trigger1 = !time
value = 300,6
volume = 255

[State 1514, HandExplod]
type = Explod
trigger1 = AnimElem = 1
anim = 7000
ID = 7000
pos = 40,-48
postype = p1
facing = -1
bindtime = 1
removetime = -2
scale = 0.25+(var(27)*0.03),0.25+(var(27)*0.03)
sprpriority = 3
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 1514, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = (-180-var(27)*45)

[State 1514,Kaiko Dan.Helper]
type = Helper
trigger1 = AnimElem = 1
name = "Kaiko Dan"
stateno = 7013
postype = p1
pos = 10,-48
keyctrl = 0
ownpal = 1
id =7013
size.xscale = 0.15+(var(27)*0.03)
size.yscale = 0.23+(var(27)*0.05)

[State 1514, Hand Explod-Remove]
type = RemoveExplod
trigger1 = !time
id = 7007

[State 1514, Hand Explod-Remove]
type = RemoveExplod
trigger1 = !time
id = 7008

[State 1514, reset]
type = VarSet
trigger1 = animtime = 0
v = 27
value = 0

[State 1514, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------
;Pan/Giru Rocket Bomb
[Statedef 1600] ;lugar onde ser definido o projetil esquerdo
type    = S
movetype= I
physics = S
juggle  = 7
poweradd= -400
ctrl = 0
anim = 1600

;[State 1600, Attack Giru!]
;type = PlaySnd
;trigger1 = random >= 500 && time = 0
;value = 3,?
;volume = 500

[State 1600, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------
;Air Pan/Giru Rocket Bomb
[Statedef 1605] ;lugar onde ser definido o projetil esquerdo
type    = A
movetype= I
physics = A
juggle  = 7
poweradd= -400
ctrl = 0
anim = 1605

[State 0, VelMul]
type = VelMul
triggerall = var(3) != 1
trigger1 = time < 9
x = .9
y = -0.5

[State 0, VelSet]
type = VelSet
triggerall = var(3) != 1
trigger1 = AnimElem = 2,1
y = -2

;[State 1600, Attack Giru!]
;type = PlaySnd
;trigger1 = random >= 500 && time = 0
;value = 3,?
;volume = 500

[State 0, CtrlSet]
type = CtrlSet
triggerall = var(3) != 1
triggerall = stateno != [1006,1010]
trigger1 = animelem = 3
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0
;---------------------------------------------------------------------------
; COMBO FLY KICK A
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1110
sprpriority = 1
hitcountpersist = 1

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 4,0

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 80;80
y = ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0)

[State 0, Turn]
type = Turn
trigger1 = p2dist X < 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
damage    = 10
guardflag = MA
pausetime = 8,8
sparkno = -1
sparkxy = -10,-70
hitsound   = s1,4
guardsound = s2,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -8,-4
air.velocity = -8,-4
envshake.time = 15
envshake.freq = 80
envshake.ampl = ifelse(Random <500,-5,5)

[State 0]
type = Helper
triggerall = P2stateno = [5000,5999]
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
ownpal = 1
sprpriority = 5
postype = p1
pos = 50,-48;30,-30
ignorehitpause = 1
persistent = 0
supermove = 1
supermovetime = 16
pausemovetime = 16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
trigger1 = backedgebodydist >= 2
statetype = A
movetype = I
physics = A
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = pos y < 0 && AnimTime = 0
trigger1 = backedgebodydist >= 2
value = 1
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = ifelse((backedgebodydist < 2),4999,0)
ctrl = ifelse((backedgebodydist < 2),0,1)

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = AnimTime = 0
trigger1 = backedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
; COMBO FLY KICK B
[Statedef 1111]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1111
sprpriority = 1
hitcountpersist = 1

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 4,0

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 80
y = ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0)

[State 0, Turn]
type = Turn
trigger1 = p2dist X < 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
damage    = 10
guardflag = MA
pausetime = 8,8
sparkno = -1
sparkxy = -10,-70
hitsound   = s1,4
guardsound = s2,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10,-4
air.velocity = -10,-4
envshake.time = 15
envshake.freq = 80
envshake.ampl = ifelse(Random <500,-5,5)

[State 0]
type = Helper
triggerall = P2stateno = [5000,5999]
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
ownpal = 1
sprpriority = 5
postype = p1
pos = 28,-30;30,-50
ignorehitpause = 1
persistent = 0
supermove = 1
supermovetime = 16
pausemovetime = 16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
statetype = A
movetype = I
physics = A
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = pos y < 0 && AnimTime = 0
value = 1
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = ifelse((backedgebodydist < 2),4999,0)
ctrl = ifelse((backedgebodydist < 2),0,1)

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = AnimTime = 0
trigger1 = backedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
; COMBO FLY PUNCH X
[Statedef 1112]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1112
sprpriority = 1
hitcountpersist = 1

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 4,0

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 80
y = ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0)

[State 0, Turn]
type = Turn
trigger1 = p2dist X < 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
damage    = 10
guardflag = MA
pausetime = 8,8
sparkno = -1
sparkxy = -10,-70
hitsound   = s1,4
guardsound = s2,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -8,-4
air.velocity = -8,-4
envshake.time = 15
envshake.freq = 80
envshake.ampl = ifelse(Random <500,-5,5)

[State 0]
type = Helper
triggerall = P2stateno = [5000,5999]
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
ownpal = 1
sprpriority = 5
postype = p1
pos = 30,-30
ignorehitpause = 1
persistent = 0
supermove = 1
supermovetime = 16
pausemovetime = 16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
trigger1 = backedgebodydist >= 2
statetype = A
movetype = I
physics = A
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = pos y < 0 && AnimTime = 0
trigger1 = backedgebodydist >= 2
value = 1
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = ifelse((backedgebodydist < 2),4999,0)
ctrl = ifelse((backedgebodydist < 2),0,1)

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = AnimTime = 0
trigger1 = backedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
; COMBO FLY PUNCH Y
[Statedef 1113]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1113
sprpriority = 1
hitcountpersist = 1

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 4,0

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 80
y = ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0)

[State 0, Turn]
type = Turn
trigger1 = p2dist X < 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
damage    = 10
guardflag = MA
pausetime = 8,8
sparkno = -1
sparkxy = -10,-70
hitsound   = s1,4
guardsound = s2,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -8,-4
air.velocity = -8,-4
envshake.time = 15
envshake.freq = 80
envshake.ampl = ifelse(Random <500,-5,5)

[State 0]
type = Helper
triggerall = P2stateno = [5000,5999]
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
ownpal = 1
sprpriority = 5
postype = p1
pos = 30,-30
ignorehitpause = 1
persistent = 0
supermove = 1
supermovetime = 16
pausemovetime = 16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
trigger1 = backedgebodydist >= 2
statetype = A
movetype = I
physics = A
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = pos y < 0 && AnimTime = 0
trigger1 = backedgebodydist >= 2
value = 1
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = ifelse((backedgebodydist < 2),4999,0)
ctrl = ifelse((backedgebodydist < 2),0,1)

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = AnimTime = 0
trigger1 = backedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
; FINAL AIR KICK A
[Statedef 1115]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 1110
sprpriority = 1
hitcountpersist = 1
supermove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, Pause]
type = Pause
trigger1 = Time = 1
time = 15
movetime = 15
ignorehitpause = 1
pausebg = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4,0

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = p2bodydist x + 100
y = ifelse(p2bodydist y <= -50, p2bodydist y - 5, 10)

[State 0, Turn]
type = Turn
triggerall = !HitFall
trigger1 = p2dist X < 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 4
y = -1.5;-3

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 30,10
guardflag = HA
priority = 4
pausetime = 20,20
guard.sparkno = s8000
sparkno = -1
sparkxy = 0,-10
hitsound   = s1,5
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -7,-2
air.velocity = -8,-1
fall = 1
envshake.time = 15
envshake.freq = 80
envshake.ampl = ifelse(Random <500,-5,5)

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 37,-45;23,-45
ownpal = 1
supermove = 1
supermovetime = 16
pausemovetime = 16
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
physics = A
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
;Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = 50;ifelse((backedgebodydist < 2),4999,0)
ctrl = 1;ifelse((backedgebodydist < 2),0,1)

;[State 2100, 5]
;type = ChangeState
;Triggerall = Pos y < 0
;trigger1 = AnimTime = 0
;backedgebodydist < 2
;value = 50;4999
;ctrl = 0

;---------------------------------------------------------------------------
; FINAL AIR KICK B
[Statedef 1116]
type    = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1111
sprpriority = 1
hitcountpersist = 1
supermove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, Pause]
type = Pause
trigger1 = Time = 1
time = 15
movetime = 15
ignorehitpause = 1
pausebg = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4,0

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = p2bodydist x + 120
y = ifelse(p2bodydist y <= -30, p2bodydist y - 100, -100)

[State 0, Turn]
type = Turn
trigger1 = p2dist X < 0
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 105,0

[State 0, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = Time > 0
x = 8
y = 5

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = movehit
time = 1
ignorehitpause = 1

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 30,10
guardflag = HA
priority = 4
pausetime = 20,20
guard.sparkno = s8000
sparkno = -1
sparkxy = 0,-10
hitsound   = s1,5
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -7
air.velocity = -5,8
air.fall = 1
envshake.time = 30
envshake.freq = 80
envshake.ampl = -2

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 32,-10;23,-10
size.xscale = .8
size.yscale = .8
ownpal = 1
supermove = 1
supermovetime = 16
pausemovetime = 16
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && AnimTime = 0
physics = A
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = frontedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
;FINAL AIR PUNCH X
[Statedef 1117]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1112
sprpriority = 1
hitcountpersist = 1
supermove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, Pause]
type = Pause
trigger1 = Time = 1
time = 15
movetime = 15
ignorehitpause = 1
pausebg = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 4,0

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 80
y = ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0)

[State 0, Turn]
type = Turn
trigger1 = Time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(1) < 0
x = 5
y = -1.5

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(2) = [0,10]
x = 8
y = -3

[State 640, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage    = 30,10
guardflag = HA
priority = 4
pausetime = 20,20
guard.sparkno = s8000
sparkno = -1
sparkxy = 0,-10
hitsound   = s1,5
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10,-5
air.velocity = -10,-5
fall = 1
envshake.time = 30
envshake.freq = 80
envshake.ampl = -2

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 23,-45
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
physics = A

[State 2100, 5]
type = ChangeState
trigger1 = screenpos x != [0,320]
trigger1 = Time > 30
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
;FINAL AIR PUNCH Y
[Statedef 1118]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
velset = 0,0
anim = 1113
sprpriority = 1
hitcountpersist = 1
supermove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "imagen"
ID = 8005
stateno = 8005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 15
pausemovetime = 15

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = time*25,250-time*25

[State 0, Pause]
type = Pause
trigger1 = Time = 1
time = 15
movetime = 15
ignorehitpause = 1
pausebg = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4,0

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = p2bodydist x + 80
y = ifelse(p2bodydist y <= -10, p2bodydist y - 5, 0)

[State 0, Turn]
type = Turn
trigger1 = p2dist X < 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 5

[State 210, 1]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
y = 0

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = hard
damage    = 30
guardflag = MA
pausetime = 20,20
sparkno = -1
sparkxy = -10,-70
hitsound   = s1,5
guardsound = s2,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -5,8
air.velocity = -5,8
envshake.time = 30
envshake.freq = 80
envshake.ampl = -2
fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 35,-25
size.xscale = .8
size.yscale = .8
pausemovetime = 16
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
physics = A
ignorehitpause = 1

[State 2100, 5]
type = ChangeState
Triggerall = Pos y >= 0
trigger1 = AnimTime = 0
value = ifelse((backedgebodydist < 2),4999,0)
ctrl = ifelse((backedgebodydist < 2),0,1)

[State 2100, 5]
type = ChangeState
Triggerall = Pos y < 0
trigger1 = AnimTime = 0
trigger1 = backedgebodydist < 2
value = 4999
ctrl = 0

;---------------------------------------------------------------------------
; Fly fwd punch x
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
poweradd = 25
anim = 1120
hitcountpersist = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,0
volume = 500

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 8
y = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 15,5
guardflag = HA
priority = 4
pausetime = 8,8
guard.sparkno = s8000
sparkno = -1
sparkxy = -15, -52
hitsound   = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.velocity = -3,-1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 26,-23;23,-45
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(3) >= 0
trigger2 = movecontact
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = pos y = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;---------------------------------------------------------------------------
; Fly fwd punch y
[Statedef 1121]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
poweradd = 25
anim = 1121
hitcountpersist = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,1
volume = 500

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 8
y = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 15,5
guardflag = HA
priority = 4
pausetime = 8,8
guard.sparkno = s8000
sparkno = -1
sparkxy = -15, -52
hitsound   = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.velocity = -3,-1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 26,-23
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(3) >= 0
trigger2 = movecontact
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = pos y = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;---------------------------------------------------------------------------
; Fly fwd punch a
[Statedef 1122]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
poweradd = 25
anim = 1122
hitcountpersist = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,2
volume = 500

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 8
y = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 5,2
guardflag = HA
priority = 4
pausetime = 8,8
guard.sparkno = s8000
sparkno = -1
sparkxy = -15, -52
hitsound   = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.velocity = -3,-1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 42,-49;23,-45
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(3) >= 0
trigger2 = movecontact
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = pos y = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;---------------------------------------------------------------------------
; Fly fwd punch b
[Statedef 1123]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
poweradd = 25
anim = 1123
hitcountpersist = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time = 1
v = 16
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,3
volume = 500

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 8
y = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 5,2
guardflag = HA
priority = 4
pausetime = 8,8
guard.sparkno = s8000
sparkno = -1
sparkxy = -15, -52
hitsound   = s1,4
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.velocity = -3,-1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 26,-23
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(3) >= 0
trigger2 = movecontact
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = pos y = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;---------------------------------------------------------------------------
; Fly fwd punch finish
[Statedef 1125]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
poweradd = -100
anim = 1125
hitcountpersist = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1 && pos y = 0
anim = 7001
ID = 7001
pos = -10,1
bindtime = 1
sprpriority = -1
scale = .8,.8
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 3,25+(random%4)
volume = 255
channel = 0

[State 0, MakeDust]
type = MakeDust
trigger1 = pos y > -40
pos = 0,-floor(pos y)
spacing = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0

[State 0, AfterImage] ; blanco
type = AfterImage
trigger1 = Time = 0
time = -1
length = 20
palcolor = 256
palbright = 10,10,10
palcontrast = 0,0,0
paladd = 25,25,25
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) < 0
x = 8
y = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 5,2
guardflag = HA
priority = 4
pausetime = 20,20
guard.sparkno = s8000
sparkno = -1
sparkxy = 0,-10
hitsound   = s1,5
guardsound = s2,0
animtype = Med
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10,-2
air.velocity = -10,8
fall = 1

[State 0]
type = Helper
trigger1 = MoveHit
helpertype = Normal
ID = 8000
stateno = 8000
sprpriority = 3
pos = 26,-23
size.xscale = .8
size.yscale = .8
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
triggerall = pos y = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = var(3) = 1 ; fly
trigger1 = AnimTime = 0
value = 1006
ctrl = 0

;-------------------------------------------------------------------
;ScreenBound excess
[Statedef 4999]
type    = S
physics = S
anim = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time < 10
value = 41
elem = 1

[State 2101, bound]
type = screenbound
trigger1 = 1
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y < 0 && Time >= 10
value = 41
elem = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0 && Time >= 10
statetype = A
movetype = I
physics = A

[State 0, Trans]
type = Trans
trigger1 = Time < 10
trans = addalpha
alpha = 250-time*25,time*25

[State 0, Trans]
type = Trans
trigger1 = Time = [10,19]
trans = addalpha
alpha = (time-10)*25,250-(time-10)*25

[State 0, PosAdd]
type = Posset
trigger1 = Time = 10
x = p2bodydist x = 300

[State 0, PosAdd]
type = Posset
trigger1 = pos y > 0
y = 0

[State 100, som]
type = PlaySnd
trigger1 = Time = 1
value = 4, 0

[State 3021, nothitby]
type = nothitby
trigger1 = animelemtime(1)>0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 3021, end]
type = changestate
trigger1 = pos y = 0 && Time >= 20
value = 0
ctrl = 1

;-------------------------------------------------------------------
;Tired
[Statedef 5300]
type    = S
physics = S
anim = 5300
sprpriority = 1
velset = 0,0
ctrl = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = Time = 0
time = 3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = Time = 0
time = 1

[State 0, PalFXWiz]
type = PalFX
trigger1 = Timemod = 10,0
time = 10
add = 10,20,20
mul = 256,256,256
sinadd = 10,20,20,10
invertall = 0
color = 255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 7,10
volume = 300

;Var para GuardCrash
[State 0, VarSet]
type = VarSet
trigger1 = Time >= 1
v = 15
value = 0
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = var(15)>= 1
value = 5301
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 11,0
volume = 200
channel = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y <= 0
x = 0
y = .5

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Time = 200
value = ifelse(pos y < 0, 1003, 0)
ctrl = 1
